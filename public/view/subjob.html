<style type="text/css">
	.flightOptions{
		background-color:#6d6d6d;
	}
	.flightOptions:hover{
		background-color: #000 !important;
	}
</style>
<div id="mySidenav" class="sidenav">
	<div style="text-align:center;margin-top: -2px;" class="col s12 m12 l12">
		<div style="background-color:#2b2b2c;color:#fff;padding:15px" class="row">
			<div ng-click = "closeNav()" class="col m1 l1 s1">
				<i style="padding-top:5px; cursor:pointer;" class="material-icons flipIcon">reply</i>
			</div>
			<div class="col s10 m10 s10" style="font-size:24px;">Job Summary | {{id}}</div>
			<div class="col m1 l1 s1">
				<a ng-click="closeNav()" style="color:white;" href="#create-job/{{id}}"><i style="padding-top:5px;" class="material-icons">edit</i></a>
			</div>
		</div>
		<div class="row">
			<div class="col s12 m6 l3">
				<div class="card">
					<div class="sideNavDivHeader">JOB LOCATION</div>
					<div id="statusChart" class="sideNavDivContent"></div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card">
					<div class="sideNavDivHeader">PARAMETER STATUS</div>
					<div class="sideNavDivContent">
						<div ng-show = "{{percentage<33}}">
							<i style="color:#e74c3c;font-size:150px;padding-top:25px;width:100%" class="material-icons">error_outline</i>
							<div style="color:#e74c3c;font-size:38px">ALERT</div>
						</div>
						<div ng-show="{{percentage<66 && percentage>33}}">
							<i style="color:#DDBC2B;font-size:150px;padding-top:25px;width:100%" class="material-icons">error_outline</i>
							<div style="color:#DDBC2B;font-size:38px">Warning</div>
						</div>
						<div ng-show="{{percentage>66}}">
							<i style="color:#60A017;font-size:150px;padding-top:25px;width:100%" class="material-icons">error_outline</i>
							<div style="color:#60A017;font-size:38px">Normal</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card">
					<div class="sideNavDivHeader">JOB TYPE</div>
					<div class="sideNavDivContent">
						<div style="font-size:3vw;color:#fff;padding-top:50px;">{{job.value.jobType}}</div>
					</div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card">
					<div class="sideNavDivHeader">TOTAL FLIGHTS</div>
					<div class="sideNavDivContent">
						<div style="margin-bottom:0px" class="row">
							<div style="color:white;" class="col s6 m6 l6">
								<h5>COMPLETED</h5>
								<h3>{{completedFlights}}</h3>
							</div>
							<div class="col s6 m6 l6">.</div>
						</div>
						<div class="row">
							<div class="col s6 m6 l6">.</div>
							<div style="color:white;" class="col s6 m6 l6">
								<h3>{{assignedFlights}}</h3>
								<h5>ASSIGNED</h5>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col s12 m6 l6">
				<div class="card">
					<div style="background-color:#4a4a4a;color:white;" class="sideNavDivHeader">ASSIGNED UAV(s)</div>
					<div style="background-color:white;height:300px !important;" class="slider sideNavDivContent">
						<ul class="slides">
							<li ng-repeat = "Uavs in assignedUavs" style="background-color:white;">
								<div class="row">
									<div ng-repeat = "Uav in Uavs" class="col s4 borderRight">
										<br>
										<img style="margin-top:10px;max-width:80%;height:auto" ng-src="{{Uav.image}}"><br>
										<br>
										<span><b>{{Uav.nickname}}</b></span>
									</div>
								</div>
							</li>

						</ul>
					</div>
					<br>
				</div>
			</div>
			<div class="col s12 m6 l6">
				<div class="card">
					<div style="background-color:#4a4a4a;color:white;" class="sideNavDivHeader">ASSIGNED Pilots (s)</div>
					<div style="background-color:white;height:300px !important;" class="slider sideNavDivContent">
						<ul class="slides">
							<li ng-repeat = "pilots in assignedPilots" style="background-color:white;">
								<div class="row">
									<div ng-repeat = "pilot in pilots" class="col s4 borderRight">
										<br>
										<img style="margin-top:10px;max-width:80%;height:auto" ng-src="{{pilot.image}}"><br>
										<br>
										<span><b>{{pilot.name}}</b></span>
									</div>

								</div>
							</li>

						</ul>
					</div>
					<br>
				</div>
			</div>
			<div class="col s12 m6 l6">
				<div class="card">
					<div style="background-color:#4a4a4a;color:white;" class="sideNavDivHeader">ASSIGNED PB(s)</div>
					<div style="background-color:white;height:300px !important;" class="slider sideNavDivContent">
						<ul class="slides">
							<li ng-repeat = "PBs in assignedPBs" style="background-color:white;">
									<div class="row">
										<div ng-repeat="PurpleBox in PBs"  class="col s4 borderRight">
												<br>
												<img style="margin-top:10px;max-width:80%;height:auto" ng-src="{{PurpleBox.image}}"><br>
												<br>
												<span><b>{{PurpleBox.nickname}}</b></span>
										</div>
								</div>
							</li>
						</ul>
					</div>
					<br>
				</div>
			</div>

			<div class="col s12 m6 l6">
				<div class="card">
					<div style="background-color:#4a4a4a;color:white;" class="sideNavDivHeader">ASSIGNED Payload(s)</div>
					<div style="background-color:white;height:300px !important;" class="slider sideNavDivContent">
						<ul class="slides">
							<li ng-repeat = "payloads in assignedPayloads" style="background-color:white;">
								<div class="row">
										<div ng-repeat="payload in payloads" class="col s4 borderRight">
												<br>
												<img style="margin-top:10px;max-width:80%;height:auto" ng-src="{{payload.image}}"><br>
												<br>
												<span><b>{{payload.nickname}}</b></span>
										</div>
								</div>
							</li>
						</ul>
					</div>
					<br>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="mainArea">
	<nav>
		<div class="nav-wrapper menu">
			<ul style="max-height:64px" id="nav-mobile" class="right">
				<li><a href=""><i class="fa fa-filter" style="font-size:28px;"></i></a></li>
				<li id="notificationButton" onclick = "notificationClicked()"><a href=""><i class="material-icons">notifications</i></a></li>
				<li><a href="" ng-click = "openNav()"><i class="material-icons">description</i></a></li>
			</ul>
			<div class="col s12">
				<div style="padding-left:30px;">
					<a href="#/" class="breadcrumb">Active Jobs</a>
					<a href="#/job/{{id}}" class="breadcrumb">{{id}}</a>
				</div>
			</div>
		</div>
	</nav>
	<div id="mainContent" class="row">
		<div ng-repeat="flight in flights | orderBy:'value.count'" class="col s12 m6 l3" on-finish-render="ngRepeatFinished">
			<div class="pad-left">
				<div class="card">
					<div style="color:white;height:40px;border-radius:0px;background-color:#278b04; padding-right:10px;">
							<h6 class="col s8 m8 l8" style="padding-left:10px;padding-top:5px; white-space: nowrap; overflow: hidden !important; text-overflow: ellipsis;">{{flight.key+'-F'+flight.value.count}}</h6>
							<div class="col l4 m4 s4" style="padding-top:10px; text-align:right;">
								<!-- <span ng-show="flight.value.currentStatus=='active'">Active</span>
								<span ng-show="flight.value.currentStatus=='pending'">Pending</span>
								<span ng-show="flight.value.currentStatus=='inactive'">Complete</span> -->
								<a class='dropdown-button' href='javascript:void(0);' data-activates='{{flight.id}}' dropdown style="color:white;">
										{{flight.value.currentStatus=='active'?'Active':flight.value.currentStatus=='pending'?'Pending':'Complete'}}
								    <!-- <i class="material-icons white-text">more_vert</i> -->
								</a>

								<!-- Dropdown Structure -->
								<ul id='{{flight.id}}' class='dropdown-content' ng-show="isAdmin">
								    <li ng-click="changeStatus(flight.id,'active')" class="flightOptions">
								    	<a style="color:white;" ng-class="{'red-text':flight.value.currentStatus=='active'}" href="javascript:void(0);">Active</a>
								    </li>
								    <li ng-click="changeStatus(flight.id,'pending')" class="flightOptions">
								    	<a style="color:white;" ng-class="{'red-text':flight.value.currentStatus=='pending'}" href="javascript:void(0);">Pending</a
								    ></li>
								    <li ng-click="changeStatus(flight.id,'inactive')" class="flightOptions">
								    	<a style="color:white;" ng-class="{'red-text':flight.value.currentStatus=='inactive'}" href="javascript:void(0);">Complete</
								    a></li>
								</ul>
							</div>
					</div>
					<a ng-href="{{flight.value.currentStatus == 'pending' ? '#pendingFlightModal' : '#/job/'+flight.key+'/'+flight.key+'-F'+flight.value.count }}" modal>
						<div style="height:250px; overflow:hidden">
							<div id="{{flight.key+'-'+flight.value.count}}"></div>
							<script type="text/javascript">

							</script>
						</div>
					</a>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- <div class="fixed-action-btn" style="bottom: 90px; right: 27px;">
	<a href="#/job-map/{{id}}" class="btn-floating  blue ">
		<i class="material-icons white-text">map</i>
	</a>
</div> -->

<!-- <div style="position:fixed;top: 64px; right: 0px;height:40px">
	<a ng-click = "openNav()" style="height:65px;" class="btn btn-large black" href="">
		<i class="material-icons">reply</i>
		JOB SUMMARY
	</a>
</div> -->

<div id="pendingFlightModal" class="modal">
    <div class="modal-content">
        <h4>Flight Alert</h4>
        <p>This flight has not started, there is no flight data to display</p>
    </div>
    <div class="modal-footer">
        <button ng-click = "closePendingModel()" class="btn light-blue" style="margin:15px;">Cancel</button>
    </div>
</div>
